<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Chat IA Simples</title>
    <style>
        body { background: #f3f4f6; font-family: Arial, sans-serif; }
        #chat-content { max-width: 500px; margin: 40px auto 0 auto; background: #e5e7eb; padding: 16px; border-radius: 12px; min-height: 300px; }
        #chat-form { display: flex; max-width: 500px; margin: 0 auto; }
        #user-input { flex: 1; padding: 8px; border-radius: 8px; border: 1px solid #ccc; margin-right: 8px; }
        button { padding: 8px 16px; background: #2563eb; color: #fff; border: none; border-radius: 8px; cursor: pointer; }
        .max-w-md { max-width: 80%; }
        .break-words { word-break: break-word; }
        .px-4 { padding-left: 1rem; padding-right: 1rem; }
        .py-2 { padding-top: 0.5rem; padding-bottom: 0.5rem; }
        .rounded-full { border-radius: 9999px; }
        .bg-blue-500 { background-color: #3b82f6; }
        .bg-white { background-color: #fff; }
        .text-white { color: #fff; }
        .text-gray-800 { color: #1f2937; }
        .ml-auto { margin-left: auto; }
        .mr-auto { margin-right: auto; }
        .mb-2 { margin-bottom: 0.5rem; }
    </style>
</head>
<body>
    <div id="chat-content"></div>
    <form id="chat-form" autocomplete="off">
        <input type="text" id="user-input" placeholder="Digite sua mensagem..." required/>
        <button type="submit">Enviar</button>
    </form>

    <script>
        const chatContent = document.getElementById("chat-content");
        const chatForm = document.getElementById("chat-form");
        const userInput = document.getElementById("user-input");

        function createMessageElement(message, fromUser) {
            const messageElement = document.createElement("div");
            messageElement.classList.add("max-w-md", "break-words", "px-4", "py-2", "rounded-full", "mb-2");
            messageElement.classList.add(fromUser ? "bg-blue-500" : "bg-white");
            messageElement.classList.add(fromUser ? "text-white" : "text-gray-800");
            messageElement.classList.add(fromUser ? "ml-auto" : "mr-auto");
            messageElement.textContent = message;
            return messageElement;
        }

        async function fetchResponse(userMessage) {
            try {
                const response = await fetch("https://backend.buildpicoapps.com/aero/run/llm-api?pk=v1-Z0FBQUFBQm5IZkJDMlNyYUVUTjIyZVN3UWFNX3BFTU85SWpCM2NUMUk3T2dxejhLSzBhNWNMMXNzZlp3c09BSTR6YW1Sc1BmdGNTVk1GY0liT1RoWDZZX1lNZlZ0Z1dqd3c9PQ==", {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json"
                    },
                    body: JSON.stringify({
                        prompt: userMessage
                    })
                });

                if (!response.ok) {
                    console.error("Error:", response.statusText);
                    return "Houve um erro. Tente novamente mais tarde.";
                }

                const data = await response.json();

                if (data.status === "success") {
                    return data.text;
                } else {
                    console.error("Error:", data);
                    return "Houve um erro. Tente novamente mais tarde.";
                }
            } catch (error) {
                console.error("Error:", error);
                return "Houve um erro. Tente novamente mais tarde.";
            }
        }

        chatForm.addEventListener("submit", async (event) => {
            event.preventDefault();

            const userMessage = userInput.value.trim();
            if (!userMessage) {
                return;
            }

            chatContent.appendChild(createMessageElement(userMessage, true));
            chatContent.scrollTop = chatContent.scrollHeight;
            userInput.value = "";

            const botResponse = await fetchResponse(userMessage);
            chatContent.appendChild(createMessageElement(botResponse, false));
            chatContent.scrollTop = chatContent.scrollHeight;
        });
    </script>
</body>
</html>